/**
 * MAGIX CMS
 * @copyright  MAGIX CMS Copyright (c) 2010 Gerits Aurelien, 
 * http://www.magix-cms.com, magix-cms.com http://www.magix-cjquery.com
 * @license    Dual licensed under the MIT or GPL Version 3 licenses.
 * @version    1.0
 * @author Gérits Aurélien <aurelien@magix-cms.com>
 * JS theme default
 *
 */
$(document).ready(function(){$.validator.setDefaults({debug:false,highlight:function(element,errorClass,validClass){if($(element).parent().is("div")||$(element).parent().is("p")){if($(element).parent().hasClass("input-group")){$(element).parent().parent().addClass("has-error has-feedback")}else{if(!$(element).parent().hasClass("has-error"))$(element).parent().append('<span class="fa fa-warning form-control-feedback" aria-hidden="true"></span>');$(element).parent().addClass("has-error has-feedback")}}else if($(element).is('[type="radio"]')){$(element).parent().parent().addClass("has-error").parent().addClass("has-error")}},unhighlight:function(element,errorClass,validClass){if($(element).parent().is("div")||$(element).parent().is("p")){if($(element).parent().hasClass("input-group")){$(element).parent().parent().removeClass("has-error has-feedback")}else{if($(element).parent().hasClass("has-error"))$(element).parent().find(".fa").remove();$(element).parent().removeClass("has-error has-feedback")}}else if($(element).is('[type="radio"]')){$(element).parent().parent().removeClass("has-error").parent().removeClass("has-error")}},errorPlacement:function(error,element){if(element.is(":radio")){element.parent().parent().parent().append(error)}else if(element.is(":checkbox")){error.insertAfter(element)}else if(element.is("select")){error.insertAfter(element)}else if(element.is(".checkMail")){error.insertAfter(element.next())}else if(element.is("#cryptpass")){error.insertAfter(element.next());$("<br />").insertBefore(error)}else{if(element.next().is(":button")||element.next().is(":file")){error.insertAfter(element);$("<br />").insertBefore(error)}else if(element.next().is(":submit")){error.insertAfter(element.next());$("<br />").insertBefore(error)}else{if($(element).parent().hasClass("input-group")){error.insertAfter(element.parent())}else{error.insertAfter(element)}}}},errorClass:"help-block error",errorElement:"span",validClass:"success",success:function(label){label.remove()}});function isEmpty(elem){var val=elem.val();return val.length==0?true:false}function updateParent(elem){if(isEmpty(elem))elem.next().addClass("is_empty");else elem.next().removeClass("is_empty")}$(".nice-form").each(function(){var form=$(this);var input=form.find("input");var txtarea=form.find("textarea");input.each(function(){var self=$(this);switch(self.attr("type")){case"text":case"number":case"email":case"tel":updateParent(self);self.on("change",function(){updateParent(self)});break}});txtarea.each(function(){var self=$(this);updateParent(self);self.on("change",function(){updateParent(self)})});form.on("reset",function(){input.each(function(){updateParent($(this))});txtarea.each(function(){updateParent($(this))})})})});var globalForm=function($,undefined){"use strict";function displayLoader(f,closeForm){$('input[type="submit"], button[type="submit"]').hide();closeForm=typeof closeForm!=="undefined"?closeForm:false;var loader=$(document.createElement("div")).addClass("loader").append($(document.createElement("i")).addClass("fa fa-spinner fa-pulse fa-fw"),$(document.createElement("span")).append("Chargement en cours...").addClass("sr-only"));if(closeForm)$(f).collapse();$(".mc-message").before(loader)}function removeLoader(f,closeForm){closeForm=typeof closeForm!=="undefined"?closeForm:false;if(closeForm)$(f).collapse("hide");$(".loader").remove();$('input[type="submit"], button[type="submit"]').show()}function initAlert(m,timeout,sub){sub=typeof sub!=="undefined"?sub:false;timeout=typeof timeout!=="undefined"?timeout:false;if(sub)$.jmRequest.notifier={box:"",elemclass:".mc-message-"+sub};$.jmRequest.initbox(m,{display:true});if(timeout)window.setTimeout(function(){$(".mc-message .alert").removeClass("in").remove()},timeout)}function successHandler(f){var options={handler:"submit",url:$(f).attr("action"),method:"post",form:$(f),resetForm:true,beforeSend:function(){displayLoader(f)},success:function(d){removeLoader(f);var modal=$(f).data("modal");if(modal){$(modal).modal("hide")}var sub=$(f).data("sub");if(d.debug!=undefined&&d.debug!=""){initAlert(d.debug,false,sub)}else if(d.notify!=undefined&&d.notify!=""){initAlert(d.notify,4e3,sub)}else if(d!=undefined&&d!=""){initAlert(d,4e3,sub)}}};if($(f).hasClass("button_feedback")){options.beforeSend=function(){$(f).find('button[type="submit"]').replaceWith('<i class="fa fa-spinner fa-pulse fa-fw"></i>')};options.success=function(){$(f).hide().next(".success").removeClass("hide")}}$.jmRequest(options)}function initValidation(){$(".validate_form").each(function(){$(this).removeData();$(this).off();$(this).validate({ignore:[],onsubmit:true,event:"submit",submitHandler:function(f,e){e.preventDefault();successHandler(f);return false}})})}return{run:function(){$.gForms=globalForm;initValidation()}}}(jQuery);