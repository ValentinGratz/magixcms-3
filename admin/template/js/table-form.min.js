var tableForm=(function(c,e){function a(){c(".check-all").on("change",function(){var f=c(this).data("table"),g=c("#"+f+' input[type="checkbox"]:enabled');if(c(this).prop("checked")){g.prop("checked",true)}else{g.prop("checked",false)}});c(".update-checkbox").on("click",function(g){g.preventDefault();var f=c(this).data("table"),h=c("#"+f+' input[type="checkbox"]:enabled');if(c(this).val()=="check-all"){c("#"+f+" .check-all").prop("checked",true);h.prop("checked",true)}else{c("#"+f+" .check-all").prop("checked",false);h.prop("checked",false)}})}function d(h,j,f,i){c(h+' input[type="hidden"]').val(j);c(h).modal("show");var g="/"+f+".php?action=delete";if(i){g+="&tabs="+i}f=(i?i:f);c(h+" .delete-form").validate({ignore:[],rules:{id:{required:true}},onsubmit:true,event:"submit",submitHandler:function(k){c.jmRequest({handler:"submit",url:g,method:"post",form:c(k),resetForm:true,success:function(n){c(h).modal("hide");if(n.statut){window.setTimeout(function(){c(".mc-message .alert-success").alert("close")},4000)}else{window.setTimeout(function(){c(".mc-message .alert-warning").alert("close")},4000)}c.jmRequest.notifier={cssClass:".mc-message-"+f};c.jmRequest.initbox(n.notify,{display:true});if(n.statut&&n.result){var m=n.result.id.split(",");for(var l=0;l<m.length;l++){c("#"+f+"_"+m[l]).remove();if(!c("#table-"+f+" tbody").children("tr").length){c("#table-"+f).addClass("hide").next(".no-entry").removeClass("hide")}}}}});return false}})}function b(){var f=c(".modal");if(f.length){f.modal({show:false});c(".modal_action").on("click",function(l){l.preventDefault();var k=c(this).data("target");var g=c(k+' button[type="submit"]').val();switch(k){case"#delete_modal":if(c(this).data("id")!=e&&c(this).data("id")!=null){var m=c(this).data("id");var j=c(this).data("sub")?c(this).data("sub"):false;d(k,m,g,j);break}case"#delete_multiple_modal":var i=c('tbody tr .checkbox input[type="checkbox"]:checked');if(i.length){var h=c.map(i,function(n){return c(n).val()});h=h.join();var j=c(this).data("sub")?c(this).data("sub"):false;d(k,h,g,j);break}default:c("#error_modal").modal("show")}})}}return{run:function(){a()}}})(jQuery);